{"version":3,"sources":["../src/constants.ts","../src/hooks/use-auth.ts","../src/utils/text.ts"],"names":["useMemo","useState","useRef","useEffect","Keycloak","useCallback"],"mappings":";;;;;;;;;;;;AASO,IAAM,0BAAA,GAA6B;AAEnC,IAAM,yBAAA,GAA4B;AAGlC,IAAM,aAAA,GAAgB;AACtB,IAAM,SAAA,GAAY;AAClB,IAAM,qBAAA,GAAwB;AAC9B,IAAM,sBAAA,GAAyB;AAC/B,IAAM,kBAAA,GAAqB;AAM3B,IAAM,eAAA,GAA8B;AAAA,EACzC;AAAA,IACE,IAAA,EAAM,UAAA;AAAA,IACN,KAAA,EAAO,aAAA;AAAA,IACP,MAAA,EAAQ;AAAA,GACV;AAAA,EACA;AAAA,IACE,IAAA,EAAM,SAAA;AAAA,IACN,KAAA,EAAO,kBAAA;AAAA,IACP,MAAA,EAAQ;AAAA,GACV;AAAA,EACA;AAAA,IACE,IAAA,EAAM,aAAA;AAAA,IACN,KAAA,EAAO,SAAA;AAAA,IACP,MAAA,EAAQ;AAAA,GACV;AAAA,EACA;AAAA,IACE,IAAA,EAAM,eAAA;AAAA,IACN,KAAA,EAAO,eAAA;AAAA,IACP,MAAA,EAAQ;AAAA,GACV;AAAA,EACA;AAAA,IACE,IAAA,EAAM,UAAA;AAAA,IACN,KAAA,EAAO,UAAA;AAAA,IACP,MAAA,EAAQ,SAAA;AAAA,IACR,SAAA,EAAW;AAAA;AAEf;;;ACpCA,SAAS,gBAAgB,QAAA,EAA8B;AACrD,EAAA,OAAO;AAAA,IACL,GAAA,EAAK,SAAS,WAAA,EAAa,GAAA;AAAA,IAC3B,KAAA,EAAO,SAAS,WAAA,EAAa,KAAA;AAAA,IAC7B,IAAA,EAAM,SAAS,WAAA,EAAa,IAAA;AAAA,IAC5B,kBAAA,EAAoB,SAAS,WAAA,EAAa,kBAAA;AAAA,IAC1C,UAAA,EAAY,SAAS,WAAA,EAAa,UAAA;AAAA,IAClC,WAAA,EAAa,SAAS,WAAA,EAAa,WAAA;AAAA,IACnC,cAAA,EAAgB,SAAS,WAAA,EAAa;AAAA,GACxC;AACF;AAMA,IAAM,aAAA,uBAAoB,GAAA,EAMxB;AA8BK,SAAS,QAAQ,OAAA,EAAsC;AAC5D,EAAA,MAAM;AAAA,IACJ,WAAA;AAAA,IACA,aAAA;AAAA,IACA,gBAAA;AAAA,IACA,gBAAA;AAAA,IACA,iBAAA;AAAA,IACA,eAAA;AAAA,IACA,MAAA,GAAS,WAAA;AAAA,IACT,oBAAA,GAAuB,KAAA;AAAA,IACvB,gBAAA,GAAmB;AAAA,GACrB,GAAI,OAAA;AAGJ,EAAA,MAAM,cAAA,GAAiCA,aAAA;AAAA,IACrC,OAAO;AAAA,MACL,GAAA,EAAK,WAAA;AAAA,MACL,KAAA,EAAO,aAAA;AAAA,MACP,QAAA,EAAU;AAAA,KACZ,CAAA;AAAA,IACA,CAAC,WAAA,EAAa,aAAA,EAAe,gBAAgB;AAAA,GAC/C;AAEA,EAAA,MAAM,SAAA,GAAYA,cAAQ,MAAM,IAAA,CAAK,UAAU,cAAc,CAAA,EAAG,CAAC,cAAc,CAAC,CAAA;AAEhF,EAAA,MAAM,CAAC,SAAA,EAAW,YAAY,CAAA,GAAIC,cAAA,CAAoB;AAAA,IACpD,eAAA,EAAiB,KAAA;AAAA,IACjB,SAAA,EAAW,IAAA;AAAA,IACX,IAAA,EAAM,IAAA;AAAA,IACN,KAAA,EAAO;AAAA,GACR,CAAA;AAED,EAAA,MAAM,WAAA,GAAcC,aAAwB,IAAI,CAAA;AAGhD,EAAAC,eAAA,CAAU,MAAM;AACd,IAAA,IAAI,SAAA,GAAY,KAAA;AAEhB,IAAA,MAAM,OAAO,YAA2B;AACtC,MAAA,IAAI;AAEF,QAAA,IAAI,MAAA,GAAS,aAAA,CAAc,GAAA,CAAI,SAAS,CAAA;AAGxC,QAAA,IAAI,MAAA,EAAQ,QAAA,CAAS,aAAA,KAAkB,KAAA,CAAA,EAAW;AAChD,UAAA,WAAA,CAAY,UAAU,MAAA,CAAO,QAAA;AAC7B,UAAA,eAAA,GAAkB,OAAO,QAAQ,CAAA;AAEjC,UAAA,IAAI,MAAA,CAAO,QAAA,CAAS,aAAA,IAAiB,MAAA,CAAO,SAAS,WAAA,EAAa;AAChE,YAAA,MAAM,QAAA,GAAW,eAAA,CAAgB,MAAA,CAAO,QAAQ,CAAA;AAChD,YAAA,IAAI,CAAC,SAAA,EAAW;AACd,cAAA,YAAA,CAAa;AAAA,gBACX,eAAA,EAAiB,IAAA;AAAA,gBACjB,SAAA,EAAW,KAAA;AAAA,gBACX,IAAA,EAAM,QAAA;AAAA,gBACN,KAAA,EAAO;AAAA,eACR,CAAA;AAAA,YACH;AAAA,UACF,CAAA,MAAA,IAAW,CAAC,SAAA,EAAW;AACrB,YAAA,YAAA,CAAa;AAAA,cACX,eAAA,EAAiB,KAAA;AAAA,cACjB,SAAA,EAAW,KAAA;AAAA,cACX,IAAA,EAAM,IAAA;AAAA,cACN,KAAA,EAAO;AAAA,aACR,CAAA;AAAA,UACH;AACA,UAAA;AAAA,QACF;AAGA,QAAA,IAAI,WAAW,KAAA,CAAA,EAAW;AACxB,UAAA,MAAM,WAAA,GAAc,IAAIC,yBAAA,CAAS,cAAc,CAAA;AAC/C,UAAA,MAAA,GAAS;AAAA,YACP,QAAA,EAAU,WAAA;AAAA,YACV,WAAA,EAAa;AAAA,WACf;AACA,UAAA,aAAA,CAAc,GAAA,CAAI,WAAW,MAAM,CAAA;AAAA,QACrC;AAEA,QAAA,MAAM,WAAW,MAAA,CAAO,QAAA;AACxB,QAAA,WAAA,CAAY,OAAA,GAAU,QAAA;AACtB,QAAA,eAAA,GAAkB,QAAQ,CAAA;AAG1B,QAAA,IAAI,MAAA,CAAO,gBAAgB,IAAA,EAAM;AAC/B,UAAA,MAAM,WAAA,GAA4C;AAAA,YAChD,MAAA;AAAA,YACA,gBAAA;AAAA,YACA,UAAA,EAAY,MAAA;AAAA,YACZ,YAAA,EAAc,UAAA;AAAA,YACd,KAAA,EAAO;AAAA,WACT;AAGA,UAAA,IAAI,oBAAA,IAAwB,OAAO,MAAA,KAAW,WAAA,EAAa;AACzD,YAAA,WAAA,CAAY,yBAAA,GAA4B,CAAA,EAAG,MAAA,CAAO,QAAA,CAAS,MAAM,CAAA,sBAAA,CAAA;AAAA,UACnE;AAEA,UAAA,MAAA,CAAO,WAAA,GAAc,QAAA,CAAS,IAAA,CAAK,WAAW,CAAA;AAAA,QAChD;AAEA,QAAA,MAAM,aAAA,GAAgB,MAAM,MAAA,CAAO,WAAA;AAEnC,QAAA,IAAI,SAAA,EAAW;AAEf,QAAA,IAAI,aAAA,IAAiB,SAAS,WAAA,EAAa;AACzC,UAAA,MAAM,QAAA,GAAW,gBAAgB,QAAQ,CAAA;AACzC,UAAA,YAAA,CAAa;AAAA,YACX,eAAA,EAAiB,IAAA;AAAA,YACjB,SAAA,EAAW,KAAA;AAAA,YACX,IAAA,EAAM,QAAA;AAAA,YACN,KAAA,EAAO;AAAA,WACR,CAAA;AAAA,QACH,CAAA,MAAO;AACL,UAAA,YAAA,CAAa;AAAA,YACX,eAAA,EAAiB,KAAA;AAAA,YACjB,SAAA,EAAW,KAAA;AAAA,YACX,IAAA,EAAM,IAAA;AAAA,YACN,KAAA,EAAO;AAAA,WACR,CAAA;AAAA,QACH;AAGA,QAAA,QAAA,CAAS,iBAAiB,MAAM;AAC9B,UAAA,QAAA,CACG,WAAA,CAAY,0BAA0B,CAAA,CACtC,IAAA,CAAK,CAAC,SAAA,KAAuB;AAC5B,YAAA,IAAI,SAAA,IAAa,QAAA,CAAS,WAAA,IAAe,CAAC,SAAA,EAAW;AACnD,cAAA,MAAM,QAAA,GAAW,gBAAgB,QAAQ,CAAA;AACzC,cAAA,YAAA,CAAa,CAAC,IAAA,MAAU;AAAA,gBACtB,GAAG,IAAA;AAAA,gBACH,IAAA,EAAM,QAAA;AAAA,gBACN,eAAA,EAAiB;AAAA,eACnB,CAAE,CAAA;AAAA,YACJ;AACA,YAAA,OAAO,SAAA;AAAA,UACT,CAAC,CAAA,CACA,KAAA,CAAM,MAAY;AACjB,YAAA,IAAI,CAAC,SAAA,EAAW;AACd,cAAA,YAAA,CAAa;AAAA,gBACX,eAAA,EAAiB,KAAA;AAAA,gBACjB,SAAA,EAAW,KAAA;AAAA,gBACX,IAAA,EAAM,IAAA;AAAA,gBACN,KAAA,EAAO;AAAA,eACR,CAAA;AAAA,YACH;AAAA,UACF,CAAC,CAAA;AAAA,QACL,CAAA;AAAA,MACF,SAAS,KAAA,EAAO;AAEd,QAAA,OAAA,CAAQ,KAAA,CAAM,8CAA8C,KAAK,CAAA;AACjE,QAAA,IAAI,CAAC,SAAA,EAAW;AACd,UAAA,YAAA,CAAa;AAAA,YACX,eAAA,EAAiB,KAAA;AAAA,YACjB,SAAA,EAAW,KAAA;AAAA,YACX,IAAA,EAAM,IAAA;AAAA,YACN,KAAA,EAAO;AAAA,WACR,CAAA;AAAA,QACH;AAAA,MACF;AAAA,IACF,CAAA;AAEA,IAAA,KAAK,IAAA,EAAK;AAEV,IAAA,OAAO,MAAM;AACX,MAAA,SAAA,GAAY,IAAA;AAAA,IACd,CAAA;AAAA,EAGF,GAAG,CAAC,SAAA,EAAW,gBAAgB,MAAA,EAAQ,oBAAA,EAAsB,gBAAgB,CAAC,CAAA;AAI9E,EAAA,MAAM,KAAA,GAAQC,kBAAY,MAAY;AACpC,IAAA,MAAM,WAAW,WAAA,CAAY,OAAA;AAC7B,IAAA,IAAI,CAAC,QAAA,EAAU;AAEf,IAAA,KAAK,SAAS,KAAA,CAAM;AAAA,MAClB,WAAA,EAAa,gBAAA,IAAoB,MAAA,CAAO,QAAA,CAAS,IAAA;AAAA,MACjD,KAAA,EAAO;AAAA,KACR,CAAA;AAAA,EACH,CAAA,EAAG,CAAC,gBAAgB,CAAC,CAAA;AAErB,EAAA,MAAM,MAAA,GAASA,kBAAY,YAA2B;AACpD,IAAA,MAAM,WAAW,WAAA,CAAY,OAAA;AAC7B,IAAA,IAAI,CAAC,QAAA,EAAU;AAGf,IAAA,MAAM,OAAA,GAAU,SAAS,OAAA,IAAW,IAAA;AACpC,IAAA,MAAM,YAAA,GAAe,SAAS,YAAA,IAAgB,IAAA;AAC9C,IAAA,MAAM,WAAA,GAAc,iBAAA,IAAqB,MAAA,CAAO,QAAA,CAAS,MAAA;AAGzD,IAAA,YAAA,CAAa;AAAA,MACX,eAAA,EAAiB,KAAA;AAAA,MACjB,SAAA,EAAW,KAAA;AAAA,MACX,IAAA,EAAM,IAAA;AAAA,MACN,KAAA,EAAO;AAAA,KACR,CAAA;AAGD,IAAA,IAAI,YAAA,KAAiB,IAAA,IAAQ,YAAA,KAAiB,EAAA,EAAI;AAChD,MAAA,MAAM,YAAY,CAAA,EAAG,cAAA,CAAe,GAAG,CAAA,QAAA,EAAW,eAAe,KAAK,CAAA,+BAAA,CAAA;AACtE,MAAA,IAAI;AACF,QAAA,MAAM,MAAM,SAAA,EAAW;AAAA,UACrB,MAAA,EAAQ,MAAA;AAAA,UACR,OAAA,EAAS,EAAE,cAAA,EAAgB,mCAAA,EAAoC;AAAA,UAC/D,IAAA,EAAM,IAAI,eAAA,CAAgB;AAAA,YACxB,WAAW,cAAA,CAAe,QAAA;AAAA,YAC1B,KAAA,EAAO,YAAA;AAAA,YACP,eAAA,EAAiB;AAAA,WAClB,EAAE,QAAA;AAAS,SACb,CAAA;AAAA,MACH,SAAS,KAAA,EAAO;AAEd,QAAA,OAAA,CAAQ,IAAA,CAAK,uCAAuC,KAAK,CAAA;AAAA,MAC3D;AAAA,IACF;AAGA,IAAA,IAAI;AACF,MAAA,MAAM,cAAA,GAAiB,CAAA,YAAA,EAAe,cAAA,CAAe,QAAQ,CAAA,CAAA;AAC7D,MAAA,KAAA,MAAW,GAAA,IAAO,MAAA,CAAO,IAAA,CAAK,YAAY,CAAA,EAAG;AAC3C,QAAA,IAAI,IAAI,UAAA,CAAW,cAAc,KAAK,GAAA,CAAI,UAAA,CAAW,KAAK,CAAA,EAAG;AAC3D,UAAA,YAAA,CAAa,WAAW,GAAG,CAAA;AAAA,QAC7B;AAAA,MACF;AACA,MAAA,KAAA,MAAW,GAAA,IAAO,MAAA,CAAO,IAAA,CAAK,cAAc,CAAA,EAAG;AAC7C,QAAA,IAAI,IAAI,UAAA,CAAW,cAAc,KAAK,GAAA,CAAI,UAAA,CAAW,KAAK,CAAA,EAAG;AAC3D,UAAA,cAAA,CAAe,WAAW,GAAG,CAAA;AAAA,QAC/B;AAAA,MACF;AAAA,IACF,SAAS,KAAA,EAAO;AAEd,MAAA,OAAA,CAAQ,IAAA,CAAK,uCAAuC,KAAK,CAAA;AAAA,IAC3D;AAGA,IAAA,MAAM,MAAA,GAAS,IAAI,eAAA,CAAgB;AAAA,MACjC,WAAW,cAAA,CAAe,QAAA;AAAA,MAC1B,wBAAA,EAA0B;AAAA,KAC3B,CAAA;AAED,IAAA,IAAI,OAAA,KAAY,IAAA,IAAQ,OAAA,KAAY,EAAA,EAAI;AACtC,MAAA,MAAA,CAAO,MAAA,CAAO,iBAAiB,OAAO,CAAA;AAAA,IACxC;AAEA,IAAA,MAAM,SAAA,GAAY,CAAA,EAAG,cAAA,CAAe,GAAG,CAAA,QAAA,EAAW,eAAe,KAAK,CAAA,gCAAA,EAAmC,MAAA,CAAO,QAAA,EAAU,CAAA,CAAA;AAC1H,IAAA,MAAA,CAAO,SAAS,IAAA,GAAO,SAAA;AAAA,EACzB,CAAA,EAAG,CAAC,cAAA,EAAgB,iBAAiB,CAAC,CAAA;AAEtC,EAAA,MAAM,QAAA,GAAWA,kBAAY,YAAyC;AACpE,IAAA,MAAM,WAAW,WAAA,CAAY,OAAA;AAC7B,IAAA,IAAI,QAAA,EAAU,aAAA,KAAkB,IAAA,EAAM,OAAO,MAAA;AAE7C,IAAA,IAAI;AACF,MAAA,MAAM,QAAA,CAAS,YAAY,yBAAyB,CAAA;AACpD,MAAA,OAAO,QAAA,CAAS,KAAA;AAAA,IAClB,SAAS,KAAA,EAAO;AAEd,MAAA,OAAA,CAAQ,KAAA,CAAM,oCAAoC,KAAK,CAAA;AACvD,MAAA,YAAA,CAAa;AAAA,QACX,eAAA,EAAiB,KAAA;AAAA,QACjB,SAAA,EAAW,KAAA;AAAA,QACX,IAAA,EAAM,IAAA;AAAA,QACN,KAAA,EAAO;AAAA,OACR,CAAA;AACD,MAAA,OAAO,MAAA;AAAA,IACT;AAAA,EACF,CAAA,EAAG,EAAE,CAAA;AAEL,EAAA,MAAM,UAAA,GAAaA,kBAAY,MAAY;AACzC,IAAA,YAAA,CAAa,CAAC,IAAA,MAAU,EAAE,GAAG,IAAA,EAAM,KAAA,EAAO,MAAK,CAAE,CAAA;AAAA,EACnD,CAAA,EAAG,EAAE,CAAA;AAGL,EAAA,OAAOL,aAAA;AAAA,IACL,OAAO;AAAA,MACL,GAAG,SAAA;AAAA,MACH,KAAA;AAAA,MACA,MAAA;AAAA,MACA,QAAA;AAAA,MACA;AAAA,KACF,CAAA;AAAA,IACA,CAAC,SAAA,EAAW,KAAA,EAAO,MAAA,EAAQ,UAAU,UAAU;AAAA,GACjD;AACF;;;ACrVO,IAAM,eAAA,GAAkB,CAAC,IAAA,KAAyB;AACvD,EAAA,MAAM,KAAA,GAAQ,IAAA,CAAK,IAAA,EAAK,CAAE,MAAM,GAAG,CAAA;AACnC,EAAA,IAAI,KAAA,CAAM,UAAU,CAAA,EAAG;AACrB,IAAA,OAAO,CAAA,EAAG,KAAA,CAAM,CAAC,CAAA,CAAE,CAAC,CAAC,CAAA,EAAG,KAAA,CAAM,KAAA,CAAM,SAAS,CAAC,CAAA,CAAE,CAAC,CAAC,GAAG,WAAA,EAAY;AAAA,EACnE;AACA,EAAA,OAAO,IAAA,CAAK,KAAA,CAAM,CAAA,EAAG,CAAC,EAAE,WAAA,EAAY;AACtC;AAMO,IAAM,eAAA,GAAkB,CAAC,IAAA,KAAyB;AACvD,EAAA,IAAI,CAAC,IAAA,IAAQ,IAAA,CAAK,IAAA,EAAK,CAAE,WAAW,CAAA,EAAG;AACrC,IAAA,OAAO,EAAA;AAAA,EACT;AACA,EAAA,OAAO,IAAA,CAAK,IAAA,EAAK,CAAE,CAAC,EAAE,WAAA,EAAY;AACpC;AAUO,SAAS,mBAAmB,IAAA,EAA2C;AAC5E,EAAA,IAAI,IAAA,KAAS,IAAA,IAAQ,IAAA,KAAS,MAAA,EAAW;AACvC,IAAA,OAAO,SAAA;AAAA,EACT;AAEA,EAAA,IAAI,IAAA,CAAK,SAAS,IAAA,IAAQ,IAAA,CAAK,SAAS,MAAA,IAAa,IAAA,CAAK,SAAS,EAAA,EAAI;AACrE,IAAA,OAAO,IAAA,CAAK,IAAA;AAAA,EACd;AAEA,EAAA,IACE,IAAA,CAAK,UAAA,KAAe,IAAA,IACpB,IAAA,CAAK,UAAA,KAAe,MAAA,IACpB,IAAA,CAAK,WAAA,KAAgB,IAAA,IACrB,IAAA,CAAK,WAAA,KAAgB,MAAA,EACrB;AACA,IAAA,OAAO,CAAA,EAAG,IAAA,CAAK,UAAU,CAAA,CAAA,EAAI,KAAK,WAAW,CAAA,CAAA;AAAA,EAC/C;AAEA,EAAA,IACE,IAAA,CAAK,uBAAuB,IAAA,IAC5B,IAAA,CAAK,uBAAuB,MAAA,IAC5B,IAAA,CAAK,uBAAuB,EAAA,EAC5B;AACA,IAAA,OAAO,IAAA,CAAK,kBAAA;AAAA,EACd;AAEA,EAAA,IAAI,IAAA,CAAK,UAAU,IAAA,IAAQ,IAAA,CAAK,UAAU,MAAA,IAAa,IAAA,CAAK,UAAU,EAAA,EAAI;AACxE,IAAA,OAAO,IAAA,CAAK,KAAA;AAAA,EACd;AAEA,EAAA,OAAO,SAAA;AACT;AAMO,IAAM,cAAA,GAAiB,CAAC,IAAA,KAAyB;AACtD,EAAA,MAAM,UAAA,GAAa,CAAA;AACnB,EAAA,MAAM,OAAA,GAAU,GAAA;AAChB,EAAA,IAAI,IAAA,GAAO,CAAA;AACX,EAAA,KAAA,IAAS,CAAA,GAAI,CAAA,EAAG,CAAA,GAAI,IAAA,CAAK,QAAQ,CAAA,EAAA,EAAK;AACpC,IAAA,IAAA,GAAO,IAAA,CAAK,UAAA,CAAW,CAAC,CAAA,IAAA,CAAM,QAAQ,UAAA,IAAc,IAAA,CAAA;AAAA,EACtD;AACA,EAAA,MAAM,GAAA,GAAM,IAAA,CAAK,GAAA,CAAI,IAAI,CAAA,GAAI,OAAA;AAC7B,EAAA,OAAO,OAAO,GAAG,CAAA,WAAA,CAAA;AACnB;AAKO,IAAM,mBAAA,GAAsB,CAAC,IAAA,KAAqC;AACvE,EAAA,OAAO,IAAA,KAAS,SAAS,cAAA,GAAiB,iBAAA;AAC5C","file":"index.cjs","sourcesContent":["// ============================================================================\n// @zerocopter/nav-core - Shared Constants\n// Platform-agnostic constants shared between Next.js and Framer\n// ============================================================================\n\nimport type { MenuItem } from './types';\n\n// --- Token Management ---\n/** Refresh token if it expires within this many seconds */\nexport const TOKEN_REFRESH_MIN_VALIDITY = 30;\n/** Update token if it expires within this many seconds */\nexport const TOKEN_UPDATE_MIN_VALIDITY = 300; // 5 minutes\n\n// --- Layout Constants (platform-agnostic values, not Tailwind classes) ---\nexport const NAV_HEIGHT_PX = 56; // 14 * 4 = 56px (equivalent to h-14)\nexport const ICON_SIZE = 20;\nexport const AVATAR_SIZE_MOBILE_PX = 32; // w-8 h-8\nexport const AVATAR_SIZE_DESKTOP_PX = 40; // w-10 h-10\nexport const DROPDOWN_OFFSET_PX = 8;\n\n// --- Menu Items ---\n// Icon field is a semantic identifier that each platform maps to its own icon implementation.\n// Next.js: maps to SVG file paths in /public/svgs/\n// Framer: maps to inline SVG components\nexport const USER_MENU_ITEMS: MenuItem[] = [\n  {\n    icon: 'sparkles',\n    label: 'Update plan',\n    action: 'upgrade',\n  },\n  {\n    icon: 'account',\n    label: 'Account settings',\n    action: 'account',\n  },\n  {\n    icon: 'credit-card',\n    label: 'Billing',\n    action: 'billing',\n  },\n  {\n    icon: 'notifications',\n    label: 'Notifications',\n    action: 'notifications',\n  },\n  {\n    icon: 'sign-out',\n    label: 'Sign out',\n    action: 'signout',\n    separator: true,\n  },\n];\n","// ============================================================================\n// @zerocopter/nav-core - useAuth Hook\n// Platform-agnostic Keycloak authentication hook.\n// Works in both Next.js (via AuthProvider) and Framer (standalone).\n// ============================================================================\n\nimport Keycloak from 'keycloak-js';\nimport { useCallback, useEffect, useMemo, useRef, useState } from 'react';\n\nimport { TOKEN_REFRESH_MIN_VALIDITY, TOKEN_UPDATE_MIN_VALIDITY } from '../constants';\nimport type { AuthContext, AuthState, KeycloakConfig, UseAuthOptions, UserInfo } from '../types';\n\n// --- Internal helpers ---\n\n/** Extract UserInfo from Keycloak token payload */\nfunction extractUserInfo(keycloak: Keycloak): UserInfo {\n  return {\n    sub: keycloak.tokenParsed?.sub,\n    email: keycloak.tokenParsed?.email as string | undefined,\n    name: keycloak.tokenParsed?.name as string | undefined,\n    preferred_username: keycloak.tokenParsed?.preferred_username as string | undefined,\n    given_name: keycloak.tokenParsed?.given_name as string | undefined,\n    family_name: keycloak.tokenParsed?.family_name as string | undefined,\n    email_verified: keycloak.tokenParsed?.email_verified as boolean | undefined,\n  };\n}\n\n/**\n * Keycloak instance cache — survives React re-mounts (Framer editor, StrictMode).\n * Key: JSON-stringified config. Value: Keycloak instance + init promise.\n */\nconst keycloakCache = new Map<\n  string,\n  {\n    instance: Keycloak;\n    initPromise: Promise<boolean> | null;\n  }\n>();\n\n// ============================================================================\n// useAuth — the shared hook\n// ============================================================================\n\n/**\n * Platform-agnostic Keycloak authentication hook.\n *\n * **Next.js usage:**\n * Wrap in an AuthProvider that calls `useAuth()` once and distributes\n * the result via React Context. This ensures a single Keycloak instance.\n *\n * **Framer usage:**\n * Call directly inside a Framer code component. The hook manages its own\n * Keycloak lifecycle with an internal instance cache.\n *\n * @example\n * ```tsx\n * const auth = useAuth({\n *   keycloakUrl: 'https://auth.dev.zrc.pt',\n *   keycloakRealm: 'zc',\n *   keycloakClientId: 'zcnxt-frontend',\n * });\n *\n * if (auth.isLoading) return <Spinner />;\n * if (!auth.isAuthenticated) return <button onClick={auth.login}>Log in</button>;\n * return <p>Hello, {auth.user?.name}</p>;\n * ```\n */\nexport function useAuth(options: UseAuthOptions): AuthContext {\n  const {\n    keycloakUrl,\n    keycloakRealm,\n    keycloakClientId,\n    loginRedirectUri,\n    logoutRedirectUri,\n    onKeycloakReady,\n    onLoad = 'check-sso',\n    enableSilentSsoCheck = false,\n    checkLoginIframe = false,\n  } = options;\n\n  // Memoize the Keycloak config to keep the effect dependency stable\n  const keycloakConfig: KeycloakConfig = useMemo(\n    () => ({\n      url: keycloakUrl,\n      realm: keycloakRealm,\n      clientId: keycloakClientId,\n    }),\n    [keycloakUrl, keycloakRealm, keycloakClientId],\n  );\n\n  const configKey = useMemo(() => JSON.stringify(keycloakConfig), [keycloakConfig]);\n\n  const [authState, setAuthState] = useState<AuthState>({\n    isAuthenticated: false,\n    isLoading: true,\n    user: null,\n    error: null,\n  });\n\n  const keycloakRef = useRef<Keycloak | null>(null);\n\n  // ---- Initialize Keycloak ----\n  useEffect(() => {\n    let cancelled = false;\n\n    const init = async (): Promise<void> => {\n      try {\n        // Get or create cached instance\n        let cached = keycloakCache.get(configKey);\n\n        // If already initialized, reuse\n        if (cached?.instance.authenticated !== undefined) {\n          keycloakRef.current = cached.instance;\n          onKeycloakReady?.(cached.instance);\n\n          if (cached.instance.authenticated && cached.instance.tokenParsed) {\n            const userInfo = extractUserInfo(cached.instance);\n            if (!cancelled) {\n              setAuthState({\n                isAuthenticated: true,\n                isLoading: false,\n                user: userInfo,\n                error: null,\n              });\n            }\n          } else if (!cancelled) {\n            setAuthState({\n              isAuthenticated: false,\n              isLoading: false,\n              user: null,\n              error: null,\n            });\n          }\n          return;\n        }\n\n        // Create new instance if needed\n        if (cached === undefined) {\n          const newInstance = new Keycloak(keycloakConfig);\n          cached = {\n            instance: newInstance,\n            initPromise: null,\n          };\n          keycloakCache.set(configKey, cached);\n        }\n\n        const keycloak = cached.instance;\n        keycloakRef.current = keycloak;\n        onKeycloakReady?.(keycloak);\n\n        // Deduplicate concurrent init calls (React StrictMode, Framer re-renders)\n        if (cached.initPromise === null) {\n          const initOptions: Keycloak.KeycloakInitOptions = {\n            onLoad,\n            checkLoginIframe,\n            pkceMethod: 'S256',\n            responseMode: 'fragment',\n            scope: 'openid',\n          };\n\n          // Add silent SSO check if enabled (Next.js with proper hosting)\n          if (enableSilentSsoCheck && typeof window !== 'undefined') {\n            initOptions.silentCheckSsoRedirectUri = `${window.location.origin}/silent-check-sso.html`;\n          }\n\n          cached.initPromise = keycloak.init(initOptions);\n        }\n\n        const authenticated = await cached.initPromise;\n\n        if (cancelled) return;\n\n        if (authenticated && keycloak.tokenParsed) {\n          const userInfo = extractUserInfo(keycloak);\n          setAuthState({\n            isAuthenticated: true,\n            isLoading: false,\n            user: userInfo,\n            error: null,\n          });\n        } else {\n          setAuthState({\n            isAuthenticated: false,\n            isLoading: false,\n            user: null,\n            error: null,\n          });\n        }\n\n        // Token refresh callback\n        keycloak.onTokenExpired = () => {\n          keycloak\n            .updateToken(TOKEN_REFRESH_MIN_VALIDITY)\n            .then((refreshed: boolean) => {\n              if (refreshed && keycloak.tokenParsed && !cancelled) {\n                const userInfo = extractUserInfo(keycloak);\n                setAuthState((prev) => ({\n                  ...prev,\n                  user: userInfo,\n                  isAuthenticated: true,\n                }));\n              }\n              return refreshed;\n            })\n            .catch((): void => {\n              if (!cancelled) {\n                setAuthState({\n                  isAuthenticated: false,\n                  isLoading: false,\n                  user: null,\n                  error: 'Session expired. Please log in again.',\n                });\n              }\n            });\n        };\n      } catch (error) {\n        // eslint-disable-next-line no-console\n        console.error('[nav-core] Keycloak initialization failed:', error);\n        if (!cancelled) {\n          setAuthState({\n            isAuthenticated: false,\n            isLoading: false,\n            user: null,\n            error: 'Unable to check login status',\n          });\n        }\n      }\n    };\n\n    void init();\n\n    return () => {\n      cancelled = true;\n    };\n    // onKeycloakReady intentionally excluded — it's a callback, not a dependency\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [configKey, keycloakConfig, onLoad, enableSilentSsoCheck, checkLoginIframe]);\n\n  // ---- Actions ----\n\n  const login = useCallback((): void => {\n    const keycloak = keycloakRef.current;\n    if (!keycloak) return;\n\n    void keycloak.login({\n      redirectUri: loginRedirectUri ?? window.location.href,\n      scope: 'openid',\n    });\n  }, [loginRedirectUri]);\n\n  const logout = useCallback(async (): Promise<void> => {\n    const keycloak = keycloakRef.current;\n    if (!keycloak) return;\n\n    // Capture tokens BEFORE clearing state\n    const idToken = keycloak.idToken ?? null;\n    const refreshToken = keycloak.refreshToken ?? null;\n    const redirectUri = logoutRedirectUri ?? window.location.origin;\n\n    // Clear local state immediately\n    setAuthState({\n      isAuthenticated: false,\n      isLoading: false,\n      user: null,\n      error: null,\n    });\n\n    // Revoke refresh token server-side\n    if (refreshToken !== null && refreshToken !== '') {\n      const revokeUrl = `${keycloakConfig.url}/realms/${keycloakConfig.realm}/protocol/openid-connect/revoke`;\n      try {\n        await fetch(revokeUrl, {\n          method: 'POST',\n          headers: { 'Content-Type': 'application/x-www-form-urlencoded' },\n          body: new URLSearchParams({\n            client_id: keycloakConfig.clientId,\n            token: refreshToken,\n            token_type_hint: 'refresh_token',\n          }).toString(),\n        });\n      } catch (error) {\n        // eslint-disable-next-line no-console\n        console.warn('[nav-core] Token revocation failed:', error);\n      }\n    }\n\n    // Clear Keycloak-related storage\n    try {\n      const keycloakPrefix = `kc-callback-${keycloakConfig.clientId}`;\n      for (const key of Object.keys(localStorage)) {\n        if (key.startsWith(keycloakPrefix) || key.startsWith('kc-')) {\n          localStorage.removeItem(key);\n        }\n      }\n      for (const key of Object.keys(sessionStorage)) {\n        if (key.startsWith(keycloakPrefix) || key.startsWith('kc-')) {\n          sessionStorage.removeItem(key);\n        }\n      }\n    } catch (error) {\n      // eslint-disable-next-line no-console\n      console.warn('[nav-core] Failed to clear storage:', error);\n    }\n\n    // Build logout URL with id_token_hint (required by Keycloak 18+)\n    const params = new URLSearchParams({\n      client_id: keycloakConfig.clientId,\n      post_logout_redirect_uri: redirectUri,\n    });\n\n    if (idToken !== null && idToken !== '') {\n      params.append('id_token_hint', idToken);\n    }\n\n    const logoutUrl = `${keycloakConfig.url}/realms/${keycloakConfig.realm}/protocol/openid-connect/logout?${params.toString()}`;\n    window.location.href = logoutUrl;\n  }, [keycloakConfig, logoutRedirectUri]);\n\n  const getToken = useCallback(async (): Promise<string | undefined> => {\n    const keycloak = keycloakRef.current;\n    if (keycloak?.authenticated !== true) return undefined;\n\n    try {\n      await keycloak.updateToken(TOKEN_UPDATE_MIN_VALIDITY);\n      return keycloak.token;\n    } catch (error) {\n      // eslint-disable-next-line no-console\n      console.error('[nav-core] Token refresh failed:', error);\n      setAuthState({\n        isAuthenticated: false,\n        isLoading: false,\n        user: null,\n        error: 'Session expired. Please login again.',\n      });\n      return undefined;\n    }\n  }, []);\n\n  const clearError = useCallback((): void => {\n    setAuthState((prev) => ({ ...prev, error: null }));\n  }, []);\n\n  // ---- Return memoized context ----\n  return useMemo(\n    () => ({\n      ...authState,\n      login,\n      logout,\n      getToken,\n      clearError,\n    }),\n    [authState, login, logout, getToken, clearError],\n  );\n}\n","// ============================================================================\n// @zerocopter/nav-core - Text Utilities\n// Shared text processing functions used by both Next.js and Framer\n// ============================================================================\n\nimport type { UserInfo } from '../types';\n\n/**\n * Get user initials from full name.\n * - \"John Doe\" -> \"JD\"\n * - \"John\" -> \"JO\"\n */\nexport const getUserInitials = (name: string): string => {\n  const parts = name.trim().split(' ');\n  if (parts.length >= 2) {\n    return `${parts[0][0]}${parts[parts.length - 1][0]}`.toUpperCase();\n  }\n  return name.slice(0, 2).toUpperCase();\n};\n\n/**\n * Get first initial from a name.\n * - \"Zerocopter\" -> \"Z\"\n */\nexport const getFirstInitial = (name: string): string => {\n  if (!name || name.trim().length === 0) {\n    return '';\n  }\n  return name.trim()[0].toUpperCase();\n};\n\n/**\n * Get display name from UserInfo with fallback chain:\n * 1. Full name (name field)\n * 2. Given name + Family name\n * 3. Preferred username\n * 4. Email\n * 5. 'Unknown' as last resort\n */\nexport function getUserDisplayName(user: UserInfo | null | undefined): string {\n  if (user === null || user === undefined) {\n    return 'Unknown';\n  }\n\n  if (user.name !== null && user.name !== undefined && user.name !== '') {\n    return user.name;\n  }\n\n  if (\n    user.given_name !== null &&\n    user.given_name !== undefined &&\n    user.family_name !== null &&\n    user.family_name !== undefined\n  ) {\n    return `${user.given_name} ${user.family_name}`;\n  }\n\n  if (\n    user.preferred_username !== null &&\n    user.preferred_username !== undefined &&\n    user.preferred_username !== ''\n  ) {\n    return user.preferred_username;\n  }\n\n  if (user.email !== null && user.email !== undefined && user.email !== '') {\n    return user.email;\n  }\n\n  return 'Unknown';\n}\n\n/**\n * Generate a consistent avatar color from a name string.\n * Returns an HSL color string.\n */\nexport const getAvatarColor = (name: string): string => {\n  const HASH_SHIFT = 5;\n  const HUE_MAX = 360;\n  let hash = 0;\n  for (let i = 0; i < name.length; i++) {\n    hash = name.charCodeAt(i) + ((hash << HASH_SHIFT) - hash);\n  }\n  const hue = Math.abs(hash) % HUE_MAX;\n  return `hsl(${hue}, 65%, 50%)`;\n};\n\n/**\n * Get company type label for display.\n */\nexport const getCompanyTypeLabel = (type: 'team' | 'company'): string => {\n  return type === 'team' ? 'Team Account' : 'Company Account';\n};\n"]}